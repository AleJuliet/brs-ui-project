#!/usr/bin/env python3\n\"\"\"\nSample data generator for BRS Classification Review Tool.\nCreates test data structure with sample images and manifests.\n\"\"\"\n\nimport os\nimport json\nfrom datetime import datetime, timedelta\nfrom pathlib import Path\nfrom PIL import Image\nimport numpy as np\n\n# Sample data configuration\nSAMPLE_DATA_ROOT = Path(\"./sample_data/out/results\")\nDATES = [\"2025-11-15\", \"2025-11-16\", \"2025-11-17\"]\nCAPTURES_PER_DATE = 5\n\ndef create_sample_image(width=400, height=300, color=(100, 150, 200)):\n    \"\"\"Create a simple sample image\"\"\"\n    img = Image.new('RGB', (width, height), color=color)\n    return img\n\ndef create_sample_point_cloud(num_points=1000):\n    \"\"\"Create a sample point cloud\"\"\"\n    # Generate random 3D points\n    points = np.random.rand(num_points, 3) * 10  # Scale to 0-10 range\n    return points\n\ndef create_sample_brick_info():\n    \"\"\"Create sample brick info text\"\"\"\n    return \"\"\"Brick Classification Results\nTimestamp: {}\nPredicted Class: LEGO Brick 2x4\nConfidence: 0.87\nColor Prediction: Red\nShape: Rectangular\n\"\"\".format(datetime.now().isoformat())\n\ndef create_sample_manifest(capture_id, has_labels=False):\n    \"\"\"Create a sample manifest\"\"\"\n    manifest = {\n        \"capture_id\": capture_id,\n        \"created_at\": datetime.now().isoformat(),\n        \"metadata\": {}\n    }\n    \n    if has_labels:\n        manifest[\"labeled_at\"] = (datetime.now() + timedelta(minutes=30)).isoformat()\n        manifest[\"labels\"] = {\n            \"validity\": \"valid\",\n            \"color\": \"red\",\n            \"shape\": \"brick\",\n            \"markings\": \"LEGO logo\"\n        }\n    \n    return manifest\n\ndef generate_sample_data():\n    \"\"\"Generate complete sample data structure\"\"\"\n    print(f\"Creating sample data in {SAMPLE_DATA_ROOT}\")\n    \n    for date in DATES:\n        date_path = SAMPLE_DATA_ROOT / date\n        date_path.mkdir(parents=True, exist_ok=True)\n        \n        for i in range(CAPTURES_PER_DATE):\n            # Create capture folder with timestamp-like name\n            hour = 9 + i\n            minute = i * 10\n            capture_id = f\"{hour:02d}_{minute:02d}_{i:02d}_{42+i}\"\n            capture_path = date_path / capture_id\n            capture_path.mkdir(exist_ok=True)\n            \n            # Create sample images\n            colors = [(200, 100, 100), (100, 200, 100), (100, 100, 200)]  # Red, Green, Blue\n            for j, camera in enumerate([\"CAM1\", \"CAM2\", \"CAM3\"]):\n                img = create_sample_image(color=colors[j])\n                img_path = capture_path / f\"{camera}.png\"\n                img.save(img_path)\n            \n            # Create sample point cloud\n            pc = create_sample_point_cloud()\n            pc_path = capture_path / \"point_cloud.npy\"\n            np.save(pc_path, pc)\n            \n            # Create brick info\n            info_path = capture_path / \"brick_info.txt\"\n            with open(info_path, 'w') as f:\n                f.write(create_sample_brick_info())\n            \n            # Create manifest (some with labels, some without)\n            has_labels = i < 2  # First 2 captures have labels\n            manifest = create_sample_manifest(capture_id, has_labels)\n            manifest_path = capture_path / \"manifest.json\"\n            with open(manifest_path, 'w') as f:\n                json.dump(manifest, f, indent=2)\n            \n            print(f\"Created capture: {date}/{capture_id}\")\n    \n    print(f\"\\nSample data generation complete!\")\n    print(f\"Update the RESULTS_ROOT in backend/app/config.py to:\")\n    print(f'RESULTS_ROOT = Path(\"{SAMPLE_DATA_ROOT.absolute()}\")')\n    print(f\"\\nGenerated structure:\")\n    for date in DATES:\n        date_path = SAMPLE_DATA_ROOT / date\n        captures = list(date_path.iterdir()) if date_path.exists() else []\n        print(f\"  {date}/ ({len(captures)} captures)\")\n\nif __name__ == \"__main__\":\n    try:\n        # Try to import PIL for image creation\n        generate_sample_data()\n    except ImportError:\n        print(\"PIL (Pillow) not found. Install with: pip install Pillow\")\n        print(\"Generating data without images...\")\n        \n        # Generate without images\n        for date in DATES:\n            date_path = SAMPLE_DATA_ROOT / date\n            date_path.mkdir(parents=True, exist_ok=True)\n            \n            for i in range(CAPTURES_PER_DATE):\n                hour = 9 + i\n                minute = i * 10\n                capture_id = f\"{hour:02d}_{minute:02d}_{i:02d}_{42+i}\"\n                capture_path = date_path / capture_id\n                capture_path.mkdir(exist_ok=True)\n                \n                # Create empty image placeholders\n                for camera in [\"CAM1\", \"CAM2\", \"CAM3\"]:\n                    img_path = capture_path / f\"{camera}.png\"\n                    img_path.touch()\n                \n                # Create sample point cloud\n                pc = create_sample_point_cloud()\n                pc_path = capture_path / \"point_cloud.npy\"\n                np.save(pc_path, pc)\n                \n                # Create brick info\n                info_path = capture_path / \"brick_info.txt\"\n                with open(info_path, 'w') as f:\n                    f.write(create_sample_brick_info())\n                \n                # Create manifest\n                has_labels = i < 2\n                manifest = create_sample_manifest(capture_id, has_labels)\n                manifest_path = capture_path / \"manifest.json\"\n                with open(manifest_path, 'w') as f:\n                    json.dump(manifest, f, indent=2)\n        \n        print(\"Sample data generated (without images)\")\n